const IMAGE_W = 4,IMAGE_H = 3;
const Map = require('ti.map');
var openGallery = require('./gallery').createWindow;

function createWindow(intervista) {
  var win = Ti.UI.createWindow({
    title: intervista.titolo });

  win.on('open', function () {
    var actionbar = win.activity.actionBar;
    actionbar.displayHomeAsUp = true;
    actionbar.onHomeIconItemSelected = function () {
      win.close();
    };
  });

  var scrollView = Ti.UI.createScrollView();
  win.add(scrollView);

  var listView = Ti.UI.createView({
    layout: 'vertical',
    height: Ti.UI.SIZE,
    top: 0 });

  scrollView.add(listView);

  var cover = Ti.UI.createView({ height: Ti.UI.SIZE });
  listView.add(cover);
  cover.add(Ti.UI.createImageView({
    width: '100%',
    height: Ti.UI.SIZE,
    image: intervista.immagineCover }));

  cover.add(Ti.UI.createImageView({
    width: 50,
    height: Ti.UI.SIZE,
    image: 'assets/images/youtube.png' }));

  cover.on('click', () => Ti.Platform.openURL(intervista.linkVideo));

  listView.add(Ti.UI.createLabel({
    color: 'black',
    width: Ti.UI.FILL,
    height: Ti.UI.SIZE,
    textAlign: Ti.UI.TEXT_ALIGNMENT_CENTER,
    left: 16, right: 16, top: 16, bottom: 4,
    text: intervista.intervistato,
    font: {
      fontSize: 20,
      fontWeight: 'bold' } }));


  var image = Ti.UI.createView({
    width: 128,
    height: 128,
    borderRadius: 64,
    top: 4, bottom: 4 });

  listView.add(image);
  image.add(Ti.UI.createView({
    width: 128 / IMAGE_H * IMAGE_W,
    height: 128,
    backgroundImage: intervista.immagineProfilo }));


  listView.add(Ti.UI.createLabel({
    color: 'black',
    width: Ti.UI.FILL,
    height: Ti.UI.SIZE,
    left: 16, right: 16, top: 16, bottom: 4,
    text: intervista.data + ' ' + intervista.dove,
    font: {
      fontWeight: 'italic' } }));


  listView.add(Ti.UI.createLabel({
    color: 'black',
    width: Ti.UI.FILL,
    height: Ti.UI.SIZE,
    left: 16, right: 16, top: 4, bottom: 8,
    text: intervista.abstract,
    font: {
      fontWeight: 'bold' } }));


  listView.add(Ti.UI.createLabel({
    color: 'black',
    width: Ti.UI.FILL,
    height: Ti.UI.SIZE,
    left: 16, right: 16, bottom: 16,
    text: intervista.body,
    font: {
      fontSize: 16 } }));



  listView.add(Ti.UI.createLabel({
    color: 'black',
    width: Ti.UI.FILL,
    height: Ti.UI.SIZE,
    left: 16, right: 16, top: 8, bottom: 4,
    text: 'Galleria delle foto',
    font: {
      fontSize: 20,
      fontWeight: 'bold' } }));


  listView.add(createGallery(intervista.foto));

  listView.add(Ti.UI.createLabel({
    color: 'black',
    width: Ti.UI.FILL,
    height: Ti.UI.SIZE,
    left: 16, right: 16, top: 8, bottom: 4,
    text: 'Dove',
    font: {
      fontSize: 20,
      fontWeight: 'bold' } }));


  listView.add(Map.createView({
    height: 150,
    mapType: Map.SATELLITE_TYPE,
    region: {
      latitude: intervista.coordinate[0],
      longitude: intervista.coordinate[1],
      latitudeDelta: 0.005,
      longitudeDelta: 0.005 },

    animate: true,
    regionFit: true,
    userLocation: false,
    annotations: [Map.createAnnotation({
      latitude: intervista.coordinate[0],
      longitude: intervista.coordinate[1],
      pincolor: Map.ANNOTATION_RED })] }));



  win.open();
}

function createGallery(photos) {
  const scroll = Ti.UI.createScrollView({
    height: Ti.UI.SIZE,
    width: Ti.UI.FILL,
    backgroundColor: '#121212',
    layout: 'horizontal',
    contentWidth: Ti.UI.SIZE,
    horizontalWrap: false,
    scrollType: 'horizontal',
    bottom: 16 });


  for (var i = 0; i < photos.length; i++) {
    const index = i;
    const imageView = Ti.UI.createImageView({
      height: 150,
      width: 200,
      image: photos[i],
      borderRadius: 8,
      left: i === 0 ? 16 : 4,
      right: i === photos.length - 1 ? 16 : 4,
      top: 8, bottom: 8 });

    imageView.on('click', function () {
      openGallery(photos, index);
    });
    scroll.add(imageView);
  }
  return scroll;
}

exports.createWindow = createWindow;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImludGVydmlzdGEuanMiXSwibmFtZXMiOlsiSU1BR0VfVyIsIklNQUdFX0giLCJNYXAiLCJyZXF1aXJlIiwib3BlbkdhbGxlcnkiLCJjcmVhdGVXaW5kb3ciLCJpbnRlcnZpc3RhIiwid2luIiwiVGkiLCJVSSIsInRpdGxlIiwidGl0b2xvIiwib24iLCJhY3Rpb25iYXIiLCJhY3Rpdml0eSIsImFjdGlvbkJhciIsImRpc3BsYXlIb21lQXNVcCIsIm9uSG9tZUljb25JdGVtU2VsZWN0ZWQiLCJjbG9zZSIsInNjcm9sbFZpZXciLCJjcmVhdGVTY3JvbGxWaWV3IiwiYWRkIiwibGlzdFZpZXciLCJjcmVhdGVWaWV3IiwibGF5b3V0IiwiaGVpZ2h0IiwiU0laRSIsInRvcCIsImNvdmVyIiwiY3JlYXRlSW1hZ2VWaWV3Iiwid2lkdGgiLCJpbWFnZSIsImltbWFnaW5lQ292ZXIiLCJQbGF0Zm9ybSIsIm9wZW5VUkwiLCJsaW5rVmlkZW8iLCJjcmVhdGVMYWJlbCIsImNvbG9yIiwiRklMTCIsInRleHRBbGlnbiIsIlRFWFRfQUxJR05NRU5UX0NFTlRFUiIsImxlZnQiLCJyaWdodCIsImJvdHRvbSIsInRleHQiLCJpbnRlcnZpc3RhdG8iLCJmb250IiwiZm9udFNpemUiLCJmb250V2VpZ2h0IiwiYm9yZGVyUmFkaXVzIiwiYmFja2dyb3VuZEltYWdlIiwiaW1tYWdpbmVQcm9maWxvIiwiZGF0YSIsImRvdmUiLCJhYnN0cmFjdCIsImJvZHkiLCJjcmVhdGVHYWxsZXJ5IiwiZm90byIsIm1hcFR5cGUiLCJTQVRFTExJVEVfVFlQRSIsInJlZ2lvbiIsImxhdGl0dWRlIiwiY29vcmRpbmF0ZSIsImxvbmdpdHVkZSIsImxhdGl0dWRlRGVsdGEiLCJsb25naXR1ZGVEZWx0YSIsImFuaW1hdGUiLCJyZWdpb25GaXQiLCJ1c2VyTG9jYXRpb24iLCJhbm5vdGF0aW9ucyIsImNyZWF0ZUFubm90YXRpb24iLCJwaW5jb2xvciIsIkFOTk9UQVRJT05fUkVEIiwib3BlbiIsInBob3RvcyIsInNjcm9sbCIsImJhY2tncm91bmRDb2xvciIsImNvbnRlbnRXaWR0aCIsImhvcml6b250YWxXcmFwIiwic2Nyb2xsVHlwZSIsImkiLCJsZW5ndGgiLCJpbmRleCIsImltYWdlVmlldyIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQUFBLE1BQU1BLE9BQU8sR0FBRyxDQUFoQixDQUFtQkMsT0FBTyxHQUFHLENBQTdCO0FBQ0EsTUFBTUMsR0FBRyxHQUFHQyxPQUFPLENBQUMsUUFBRCxDQUFuQjtBQUNBLElBQUlDLFdBQVcsR0FBR0QsT0FBTyxDQUFDLFdBQUQsQ0FBUCxDQUFxQkUsWUFBdkM7O0FBRUEsU0FBU0EsWUFBVCxDQUF1QkMsVUFBdkIsRUFBbUM7QUFDakMsTUFBSUMsR0FBRyxHQUFHQyxFQUFFLENBQUNDLEVBQUgsQ0FBTUosWUFBTixDQUFtQjtBQUMzQkssSUFBQUEsS0FBSyxFQUFFSixVQUFVLENBQUNLLE1BRFMsRUFBbkIsQ0FBVjs7QUFHQUosRUFBQUEsR0FBRyxDQUFDSyxFQUFKLENBQU8sTUFBUCxFQUFlLFlBQVk7QUFDekIsUUFBSUMsU0FBUyxHQUFHTixHQUFHLENBQUNPLFFBQUosQ0FBYUMsU0FBN0I7QUFDQUYsSUFBQUEsU0FBUyxDQUFDRyxlQUFWLEdBQTRCLElBQTVCO0FBQ0FILElBQUFBLFNBQVMsQ0FBQ0ksc0JBQVYsR0FBbUMsWUFBVztBQUM1Q1YsTUFBQUEsR0FBRyxDQUFDVyxLQUFKO0FBQ0QsS0FGRDtBQUdELEdBTkQ7O0FBUUEsTUFBSUMsVUFBVSxHQUFHWCxFQUFFLENBQUNDLEVBQUgsQ0FBTVcsZ0JBQU4sRUFBakI7QUFDQWIsRUFBQUEsR0FBRyxDQUFDYyxHQUFKLENBQVFGLFVBQVI7O0FBRUEsTUFBSUcsUUFBUSxHQUFHZCxFQUFFLENBQUNDLEVBQUgsQ0FBTWMsVUFBTixDQUFpQjtBQUM1QkMsSUFBQUEsTUFBTSxFQUFFLFVBRG9CO0FBRTVCQyxJQUFBQSxNQUFNLEVBQUVqQixFQUFFLENBQUNDLEVBQUgsQ0FBTWlCLElBRmM7QUFHNUJDLElBQUFBLEdB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QTZCLENBTkU7QUFPdEN0RCxNQUFBQSxHQUFHLEVBQUUsQ0FQaUMsRUFPOUJnQixNQUFNLEVBQUUsQ0FQc0IsRUFBdEIsQ0FBbEI7O0FBU0F3QyxJQUFBQSxTQUFTLENBQUN2RSxFQUFWLENBQWEsT0FBYixFQUFzQixZQUFZO0FBQ2hDUixNQUFBQSxXQUFXLENBQUNzRSxNQUFELEVBQVNRLEtBQVQsQ0FBWDtBQUNELEtBRkQ7QUFHQVAsSUFBQUEsTUFBTSxDQUFDdEQsR0FBUCxDQUFXOEQsU0FBWDtBQUNEO0FBQ0QsU0FBT1IsTUFBUDtBQUNEOztBQUVEUyxPQUFPLENBQUMvRSxZQUFSLEdBQXVCQSxZQUF2QiIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IElNQUdFX1cgPSA0LCBJTUFHRV9IID0gMztcbmNvbnN0IE1hcCA9IHJlcXVpcmUoJ3RpLm1hcCcpO1xudmFyIG9wZW5HYWxsZXJ5ID0gcmVxdWlyZSgnLi9nYWxsZXJ5JykuY3JlYXRlV2luZG93O1xuXG5mdW5jdGlvbiBjcmVhdGVXaW5kb3cgKGludGVydmlzdGEpIHtcbiAgdmFyIHdpbiA9IFRpLlVJLmNyZWF0ZVdpbmRvdyh7XG4gICAgdGl0bGU6IGludGVydmlzdGEudGl0b2xvXG4gIH0pO1xuICB3aW4ub24oJ29wZW4nLCBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGFjdGlvbmJhciA9IHdpbi5hY3Rpdml0eS5hY3Rpb25CYXI7XG4gICAgYWN0aW9uYmFyLmRpc3BsYXlIb21lQXNVcCA9IHRydWU7XG4gICAgYWN0aW9uYmFyLm9uSG9tZUljb25JdGVtU2VsZWN0ZWQgPSBmdW5jdGlvbigpIHtcbiAgICAgIHdpbi5jbG9zZSgpO1xuICAgIH07XG4gIH0pO1xuXG4gIHZhciBzY3JvbGxWaWV3ID0gVGkuVUkuY3JlYXRlU2Nyb2xsVmlldygpO1xuICB3aW4uYWRkKHNjcm9sbFZpZXcpO1xuXG4gIHZhciBsaXN0VmlldyA9IFRpLlVJLmNyZWF0ZVZpZXcoe1xuICAgICAgbGF5b3V0OiAndmVydGljYWwnLFxuICAgICAgaGVpZ2h0OiBUaS5VSS5TSVpFLFxuICAgICAgdG9wOiAwLFxuICB9KVxuICBzY3JvbGxWaWV3LmFkZChsaXN0Vmlldyk7XG5cbiAgdmFyIGNvdmVyID0gVGkuVUkuY3JlYXRlVmlldyh7IGhlaWdodDogVGkuVUkuU0laRSB9KTtcbiAgbGlzdFZpZXcuYWRkKGNvdmVyKTtcbiAgY292ZXIuYWRkKFRpLlVJLmNyZWF0ZUltYWdlVmlldyh7XG4gICAgd2lkdGg6ICcxMDAlJyxcbiAgICBoZWlnaHQ6IFRpLlVJLlNJWkUsXG4gICAgaW1hZ2U6IGludGVydmlzdGEuaW1tYWdpbmVDb3ZlclxuICB9KSlcbiAgY292ZXIuYWRkKFRpLlVJLmNyZWF0ZUltYWdlVmlldyh7XG4gICAgd2lkdGg6IDUwLFxuICAgIGhlaWdodDogVGkuVUkuU0laRSxcbiAgICBpbWFnZTogJ2Fzc2V0cy9pbWFnZXMveW91dHViZS5wbmcnXG4gIH0pKTtcbiAgY292ZXIub24oJ2NsaWNrJywgKCkgPT4gVGkuUGxhdGZvcm0ub3BlblVSTChpbnRlcnZpc3RhLmxpbmtWaWRlbykpXG5cbiAgbGlzdFZpZXcuYWRkKFRpLlVJLmNyZWF0ZUxhYmVsKHtcbiAgICBjb2xvcjogJ2JsYWNrJyxcbiAgICB3aWR0aDogVGkuVUkuRklMTCxcbiAgICBoZWlnaHQ6IFRpLlVJLlNJWkUsXG4gICAgdGV4dEFsaWduOiBUaS5VSS5URVhUX0FMSUdOTUVOVF9DRU5URVIsXG4gICAgbGVmdDogMTYsIHJpZ2h0OiAxNiwgdG9wOiAxNiwgYm90dG9tOiA0LFxuICAgIHRleHQ6IGludGVydmlzdGEuaW50ZXJ2aXN0YXRvLFxuICAgIGZvbnQ6IHtcbiAgICAgIGZvbnRTaXplOiAyMCxcbiAgICAgIGZvbnRXZWlnaHQ6ICdib2xkJ1xuICAgIH1cbiAgfSkpXG4gIHZhciBpbWFnZSA9IFRpLlVJLmNyZWF0ZVZpZXcoe1xuICAgIHdpZHRoOiAxMjgsXG4gICAgaGVpZ2h0OiAxMjgsXG4gICAgYm9yZGVyUmFkaXVzOiA2NCxcbiAgICB0b3A6IDQsIGJvdHRvbTogNFxuICB9KTtcbiAgbGlzdFZpZXcuYWRkKGltYWdlKTtcbiAgaW1hZ2UuYWRkKFRpLlVJLmNyZWF0ZVZpZXcoe1xuICAgICAgd2lkdGg6IDEyOC9JTUFHRV9IKklNQUdFX1csXG4gICAgICBoZWlnaHQ6IDEyOCxcbiAgICAgIGJhY2tncm91bmRJbWFnZTogaW50ZXJ2aXN0YS5pbW1hZ2luZVByb2ZpbG8sXG4gIH0pKTtcblxuICBsaXN0Vmlldy5hZGQoVGkuVUkuY3JlYXRlTGFiZWwoe1xuICAgIGNvbG9yOiAnYmxhY2snLFxuICAgIHdpZHRoOiBUaS5VSS5GSUxMLFxuICAgIGhlaWdodDogVGkuVUkuU0laRSxcbiAgICBsZWZ0OiAxNiwgcmlnaHQ6IDE2LCB0b3A6IDE2LCBib3R0b206IDQsXG4gICAgdGV4dDogaW50ZXJ2aXN0YS5kYXRhICsgJyAnICsgaW50ZXJ2aXN0YS5kb3ZlLFxuICAgIGZvbnQ6IHtcbiAgICAgIGZvbnRXZWlnaHQ6ICdpdGFsaWMnXG4gICAgfVxuICB9KSlcbiAgbGlzdFZpZXcuYWRkKFRpLlVJLmNyZWF0ZUxhYmVsKHtcbiAgICBjb2xvcjogJ2JsYWNrJyxcbiAgICB3aWR0aDogVGkuVUkuRklMTCxcbiAgICBoZWlnaHQ6IFRpLlVJLlNJWkUsXG4gICAgbGVmdDogMTYsIHJpZ2h0OiAxNiwgdG9wOiA0LCBib3R0b206IDgsXG4gICAgdGV4dDogaW50ZXJ2aXN0YS5hYnN0cmFjdCxcbiAgICBmb250OiB7XG4gICAgICBmb250V2VpZ2h0OiAnYm9sZCdcbiAgICB9XG4gIH0pKVxuICBsaXN0Vmlldy5hZGQoVGkuVUkuY3JlYXRlTGFiZWwoe1xuICAgIGNvbG9yOiAnYmxhY2snLFxuICAgIHdpZHRoOiBUaS5VSS5GSUxMLFxuICAgIGhlaWdodDogVGkuVUkuU0laRSxcbiAgICBsZWZ0OiAxNiwgcmlnaHQ6IDE2LCBib3R0b206IDE2LFxuICAgIHRleHQ6IGludGVydmlzdGEuYm9keSxcbiAgICBmb250OiB7XG4gICAgICBmb250U2l6ZTogMTYsXG4gICAgfVxuICB9KSlcblxuICBsaXN0Vmlldy5hZGQoVGkuVUkuY3JlYXRlTGFiZWwoe1xuICAgIGNvbG9yOiAnYmxhY2snLFxuICAgIHdpZHRoOiBUaS5VSS5GSUxMLFxuICAgIGhlaWdodDogVGkuVUkuU0laRSxcbiAgICBsZWZ0OiAxNiwgcmlnaHQ6IDE2LCB0b3A6IDgsIGJvdHRvbTogNCxcbiAgICB0ZXh0OiAnR2FsbGVyaWEgZGVsbGUgZm90bycsXG4gICAgZm9udDoge1xuICAgICAgZm9udFNpemU6IDIwLFxuICAgICAgZm9udFdlaWdodDogJ2JvbGQnXG4gICAgfVxuICB9KSlcbiAgbGlzdFZpZXcuYWRkKGNyZWF0ZUdhbGxlcnkoaW50ZXJ2aXN0YS5mb3RvKSk7XG5cbiAgbGlzdFZpZXcuYWRkKFRpLlVJLmNyZWF0ZUxhYmVsKHtcbiAgICBjb2xvcjogJ2JsYWNrJyxcbiAgICB3aWR0aDogVGkuVUkuRklMTCxcbiAgICBoZWlnaHQ6IFRpLlVJLlNJWkUsXG4gICAgbGVmdDogMTYsIHJpZ2h0OiAxNiwgdG9wOiA4LCBib3R0b206IDQsXG4gICAgdGV4dDogJ0RvdmUnLFxuICAgIGZvbnQ6IHtcbiAgICAgIGZvbnRTaXplOiAyMCxcbiAgICAgIGZvbnRXZWlnaHQ6ICdib2xkJ1xuICAgIH1cbiAgfSkpXG4gIGxpc3RWaWV3LmFkZChNYXAuY3JlYXRlVmlldyh7XG4gICAgaGVpZ2h0OiAxNTAsXG4gICAgbWFwVHlwZTogTWFwLlNBVEVMTElURV9UWVBFLFxuICAgIHJlZ2lvbjoge1xuICAgICAgbGF0aXR1ZGU6IGludGVydmlzdGEuY29vcmRpbmF0ZVswXSxcbiAgICAgIGxvbmdpdHVkZTogaW50ZXJ2aXN0YS5jb29yZGluYXRlWzFdLFxuICAgICAgbGF0aXR1ZGVEZWx0YTogMC4wMDUsXG4gICAgICBsb25naXR1ZGVEZWx0YTogMC4wMDVcbiAgICB9LFxuICAgIGFuaW1hdGU6IHRydWUsXG4gICAgcmVnaW9uRml0OiB0cnVlLFxuICAgIHVzZXJMb2NhdGlvbjogZmFsc2UsXG4gICAgYW5ub3RhdGlvbnM6IFtNYXAuY3JlYXRlQW5ub3RhdGlvbih7XG4gICAgICBsYXRpdHVkZTogaW50ZXJ2aXN0YS5jb29yZGluYXRlWzBdLFxuICAgICAgbG9uZ2l0dWRlOiBpbnRlcnZpc3RhLmNvb3JkaW5hdGVbMV0sXG4gICAgICBwaW5jb2xvcjogTWFwLkFOTk9UQVRJT05fUkVELFxuICAgIH0pXVxuICB9KSlcbiAgXG4gIHdpbi5vcGVuKCk7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUdhbGxlcnkocGhvdG9zKSB7XG4gIGNvbnN0IHNjcm9sbCA9IFRpLlVJLmNyZWF0ZVNjcm9sbFZpZXcoe1xuICAgIGhlaWdodDogVGkuVUkuU0laRSxcbiAgICB3aWR0aDogVGkuVUkuRklMTCxcbiAgICBiYWNrZ3JvdW5kQ29sb3I6ICcjMTIxMjEyJyxcbiAgICBsYXlvdXQ6ICdob3Jpem9udGFsJyxcbiAgICBjb250ZW50V2lkdGg6IFRpLlVJLlNJWkUsXG4gICAgaG9yaXpvbnRhbFdyYXA6IGZhbHNlLFxuICAgIHNjcm9sbFR5cGU6ICdob3Jpem9udGFsJyxcbiAgICBib3R0b206IDE2LFxuICB9KTtcblxuICBmb3IodmFyIGkgPSAwOyBpPHBob3Rvcy5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IGluZGV4ID0gaTtcbiAgICBjb25zdCBpbWFnZVZpZXcgPSBUaS5VSS5jcmVhdGVJbWFnZVZpZXcoe1xuICAgICAgaGVpZ2h0OiAxNTAsXG4gICAgICB3aWR0aDogMjAwLFxuICAgICAgaW1hZ2U6IHBob3Rvc1tpXSxcbiAgICAgIGJvcmRlclJhZGl1czogOCxcbiAgICAgIGxlZnQ6IGkgPT09IDAgPyAxNiA6IDQsXG4gICAgICByaWdodDogaSA9PT0gcGhvdG9zLmxlbmd0aC0xID8gMTYgOiA0LFxuICAgICAgdG9wOiA4LCBib3R0b206IDgsXG4gICAgfSlcbiAgICBpbWFnZVZpZXcub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgb3BlbkdhbGxlcnkocGhvdG9zLCBpbmRleCk7XG4gICAgfSlcbiAgICBzY3JvbGwuYWRkKGltYWdlVmlldylcbiAgfVxuICByZXR1cm4gc2Nyb2xsO1xufVxuXG5leHBvcnRzLmNyZWF0ZVdpbmRvdyA9IGNyZWF0ZVdpbmRvdzsiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9sdWlnaXZpdGVsbGkvdGl0YW5pdW0tcHJvai9QaXN0aWNjaUV4cGVyaWVuY2UvUmVzb3VyY2VzIn0=
